[tox]
envlist = ansible{6}

[testenv]
basepython = python3
skip_install = true
setenv =
    ANSIBLE_FORCE_COLOR={env:ANSIBLE_FORCE_COLOR:1}
    ANSIBLE_VERBOSITY=1
    PY_COLORS={env:PY_COLORS:1}
    PYTHONDONTWRITEBYTECODE=1
    PYTHONUNBUFFERED=1
passenv =
    GALAXY_*
    GIT_*
    GITHUB_*
    HOME
    INSTALL_METHOD
    MOLECULE_*
    TERM

deps =
    ansible-lint~=6.8
    molecule
    molecule-docker
    yamllint>=1.28.0
    ansible6: ansible~=6.5

commands_pre = molecule --version
commands = molecule {posargs:test --all}